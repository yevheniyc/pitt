Source: https://www.coursera.org/learn/mds-introduction-to-data-centric-computing/lecture/6ke6c/flexible-summary-statistics-with-aggregate

English
The syntax begins the same way
you select or identify the grouping variable.
Here we will set drop to false.
But now everything is
managed within the.aggregate method.
We are chaining together two methods,.groupby.aggregate.
Now because what we're about to
type will start to get very long,
I like to put the escape character slash
between the period and
aggregate in order to go to a new line.
I like to therefore break up
the group by aggregate approach into first
identifying what the grouping
is and then specifying the aggregation methods.
When we apply the methods,
we actually get to name the new summarized variables.
For example, I want to name
a column B_avg to stand for the average value of B.
We type this in as we would
type any variable, any object.
You do not use strings.
You're saying a new column B_avg will be created.
It will be created by a recipe provided within a tuple.
The zeroth element in this tuple
is the column that we are applying the method
to and the one element in the tuple is
the method we are applying to that column.
The method can be provided as
a string because pandas has a mean method.
I know that's a lot of talking.
So let's just run it and see what happens.
Group by E aggregate,
create this new column which
comes from applying mean to the B column.
We get the same values that we saw previously.
The result has that funky looking column
ordering with the weird spacing.
That's because at the end of the day,
you get the weird multi index,
you get the weird indexing from pandas.
The grouping variable is also here.
It's the index of the grouped data frame.
I really dislike this.
I don't like to be told how to organize my data sets.
I reset the index.
Now the grouping variable is just a regular column.
I find this much easier to work with.
It's less confusing.
You don't have to worry about
changing how you filter the data frame.
The grouping variable is just
like it was at the beginning.
But okay, why do I like this approach?
Maybe I would like to calculate
another summary statistic like
the standard deviation of B.
Maybe I want to know
the standard error on the mean for B.
Notice I'm only getting this for B.
I'm not getting this for any other variable.
If I want to apply to the C column,
I can define a new column name
and specify the recipe for calculating that statistic.
I can even do counting operations.
How many rows are there, B size.
How many non missing rows, B count.
I can apply the number of unique as well,
such as to F or I can apply number of unique to
a different column like G or A.
The point being, I can apply
any kind of summary statistic that I want to
any column that I want and I get the freedom to
name the new columns whatever I want to be.
I'm going to copy the code in this cell
because rather than just
displaying the grouped and summarized result,
let's save or assign it to a new object.
I'll name this one df
E summary info and then paste it in.
As you can see, by using
that escape character to go to a new line,
now the only thing in
that top line of code is how the grouping was defined.
When I'm setting up my group by aggregate,
I will first just practice this
way where I'm printing so I can see
it and then I will assign the result to an object.
This object is a regular data frame,
it has all of the same methods as any other data frame.
We can do whatever we want with it.